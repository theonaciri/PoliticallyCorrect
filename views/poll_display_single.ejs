<md-content>
    <div class="dark_theme">
        <div layout="column" layout-align="center center">
            <div><h1><%= poll.title %></h1></div>
            <div><h3><pre><%= poll.desc %></pre></h3></div>
        </div>
        <div layout="row">
            <md-divider></md-divider>
            <div flex>
                <md-input-container class="md-block" flex-gt-xs>
                    <label>Created on :</label>
                    <input disabled><%= poll.createdAt.toDateString() %></input>
                </md-input-container>
            </div>
            <md-input-container class="md-block" flex-gt-xs>
                <label>Last edited on :</label>
                <input disabled><%= poll.updatedAt.toDateString() %></input>
            </md-input-container>

            <div flex>
                <md-input-container class="md-block" flex-gt-xs>
                    <label>Poll start date :</label>
                    <input disabled><%= poll.min_date.substring(0, 10) %></input>
                </md-input-container>
            </div>
            <md-input-container class="md-block" flex-gt-xs>
                <label>Poll end date :</label>
                <input disabled><%= poll.max_date.substring(0, 10) %></input>
            </md-input-container>
        </div>
    </div>

    <script>
        var candidates = JSON.parse('<%- candidates %>');
    </script>
    <!-- LIST OF CANDIDATES -->

    <% if (typeof candidates !== 'undefined' && candidates !== null) { %>
    <div ng-controller="DragCanList">
        <div layout="row" layout-align="space-between center">
            <md-subheader class="md-no-sticky">Your choice in order</md-subheader>
            <div></div>
            <md-button id="submitButton" class="md-raised md-primary" layout="center center" ng-click="loading ? null : SubmitCanVote()"
                       aria-label="Submit your vote" ng-disabled="!choices[0]">
                <i class="material-icons" style="font-size:300%" ng-show="!loading">&#xE065;</i>&nbsp <b ng-show="!loading">Submit your vote !</b>
                <span class="overlord-loading-spinner fa fa-spinner" style="font-size:200%" ng-show="loading" ></span>
                <span ng-show="loading"><b>&nbspSending your choices...</b></span>
            </md-button>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <div  class="containerVertical" id="choicesList">
            <md-list ng-cloak style="padding:0px" ng-repeat="choice in choices">
                <md-list-item ng-click="null">
                    <div class="_circle" style="background: {{ choice.cancolor }}"></div>
                    <p>{{ choice.name }}</p>
                    <h5>{{ choice.desc }}</h5>
                    <div style="display:none" class="id_class">{{choice.id}}</div>
                </md-list-item>
            </md-list>
        </div>

        <div layout="row" layout-align="space-between center">
            <md-subheader class="md-no-sticky">Candidates</md-subheader>
            <div></div>
            <div></div>
        </div>
        <div class="containerVertical">
            <md-list ng-cloak style="padding:0px" ng-repeat="can in candidates" id="candidateslist">
                <md-list-item ng-click="null">
                    <div class="_circle" style="background: {{ can.cancolor }}"></div>
                    <p>{{ can.name }}</p>
                    <h5>{{ can.desc }}</h5>
                    <div style="display:none" class="id_class">{{can.id}}</div>
                </md-list-item>
            </md-list>
        </div>
    </div>
    <% } %>
</md-content>